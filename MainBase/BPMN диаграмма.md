 2024-08-16 15:15

***
Материал из источника (https://habr.com/ru/companies/sberbank/articles/836092/)

**BPMN** — это нотация (или метод, хотя почти везде пишут «система») моделирования или описания бизнес-процессов. Бизнес-процесс представляет из себя логику (алгоритм) работы системы для достижения поставленной задачи. Соответственно, BPMN-диаграмма — это диаграмма, которая описывает бизнес-процесс.

**BPMN** подразумевает выполнение диаграмм на различных уровнях абстракции:
- **Описательный** (управленческий, descriptive) - используется для верхнеуровневых моделей, которые нужны описания процесса для руководителей. Часто описывает только happy path. Должен быть понятен человеку без глубоких знаний BPMN.
- **Аналитический** уровень отражает подробности исполнения, которые нужны для анализа и оптимизации процессов. Для него требуется уверенное владение нотацией.
- **Исполняемый** (execute) - используется в системах управления бизнес-процессами.

>Понятие токена:
>Токен в моделировании бизнес-процессов - это концепция, нужная для понимания работы процесса. Токен используется чтобы описать отдельный экземпляр запуска процесса.
>(Изображается простым закрашенным кругом, перемещается по потоку.)

| **Процесс**                                                                             | **Токен процесса**                                              |
| --------------------------------------------------------------------------------------- | --------------------------------------------------------------- |
| Процесс продажи маркированной продукции в розничном магазине                            | Продажа одного заказа с маркированной продукцией                |
| Процесс согласования приказов в компании                                                | Согласование одного приказа                                     |
| Процесс проведения оценки стоимости активов для получателей кредитов для малого бизнеса | Проведение одной оценки стоимости активов для получения кредита |

Основные элементы из которых состоит BPMN диаграмма:
- **События**
- **Действия**
- **Шлюзы**
- **Потоки**
![[Pasted image 20240816152058.png]]
		события (синий), действия (зелёный), шлюзы (красный) и потоки (желтый)

Элементов на самом деле элементов больше, но без основных не обойтись, их и на собеседованиях спрашивают.

### События

**События** (триггеры) используются для того, чтобы отобразить какое-то происшествие, например, приход сообщения в топик. События могут быть стартовыми, завершающими или промежуточными. Стартовые обозначают начало процесса, завершающие — его окончание, а промежуточные события могут приостанавливать выполнение процесса.

Обычно _стартовые_ события имеют тонкую рамку, _промежуточные_ — двойную, а _завершающие_ жирную рамку:

![[Pasted image 20240816154150.png]]
						Основные типы событий

>В BPMN 2.0 есть другие события, но для базы хватит этих

Помимо разделения на три основных типа, ещё есть разделение на типы по характеру работы события. Самые востребованные:
![[Pasted image 20240816154314.png]]
				Основные типы событий по характеру работы.

- **Пустое**. 
  Используется для описания подпроцесса.
- **Сообщение**.
  Используется в тех случаях, когда, например, инициатором запуска процесса выступает новое сообщение в топике, либо запрос.
- **Таймер**.
  Почти все сценарии, связанные со временем. Например запуск процесса в 12.00 каждый день.
- Ошибка.
  Событие, которое чаще всего используют как завершающее для негативных сценариев.

### Действия

Действия (или задачи) используются для отображения функций, которые будут выполняться программой. Также как и события, бывают нескольких типов и разные по характеру. Но практика показывает, что нет смысла перегружать схему большим количеством действий разных типов, это сильно усложняет схему для понимания (далеко не все глубоко разбираются в нотации). Поэтому обычно используется только две разновидности:

- **Обычное действие.**
  Действие используется для описания активности, которую уже нельзя декомпозировать. Ну в идеале.
- **Подпроцесс**.
  Это действие используется, когда необходимо в описываемый процесс внедрить ещё один (например описанный отдельно)

![[Pasted image 20240816170155.png]]
							Основные типы действий

![[Pasted image 20241021124548.png]]
![[Pasted image 20241021124703.png]]
![[Pasted image 20241021124945.png]]
![[Pasted image 20241021125120.png]]


### Шлюзы

Шлюзы - это элементы, которые используются для того чтобы ввести в процесс ветвление, условия, дополнительную логику. Чаще всего используют три типа шлюзов (опять же, в BPMN 2.0 типов больше, но для основной практики хватит трёх):

![[Pasted image 20240816170921.png]]
							Основные типы шлюзов

>**"Исключающее ИЛИ"** - такой шлюз используется для разделения выполнения процесса на один из вариантов. То есть работает как выбор, в процессе выполняется либо одна ветка, либо другая.

Примеры:

![[55daeff0b999ff1219e7c6b3dd69cd89.gif]]
![[пример 2.gif]]

![[Pasted image 20241021121840.png]]
Перечеркнутая стрелка после шлюза означает поток по умолчанию Если нет точного соответствия указанным условиям - выполняется он (устанавливать дефолтный поток необязательно).


>"**И**" - шлюз используется для распараллеливания процесса на две ветки, которые исполняются одновременно.

Примеры:

![[и1.gif]]
![[и2.gif]]
![[Pasted image 20241021122345.png]]

**"Включающее ИЛИ"** - этот шлюз включает в себя функции двух вышеописанных: выполнение процесса может как распараллеливаться на все ветви, так и разбиться на определённые, отвечающие условию.

![[Pasted image 20240816172144.png]]
					Пример с шлюзом "Включающее ИЛИ"

Пример разделения потоков:
![[вклили.gif]]

![[Pasted image 20241021122446.png]]
Так же в статье-источнике есть рекомендации по применению шлюзов.

### Потоки

Тут всё очень просто, потоки - это стрелки, которые отображают последовательность действий в процессе.

Поток управления (сплошная стрелка) не используется для отображения взаимодействия между разными процессами. Для этого есть поток сообщений (пунктирная стрелка)
![[Pasted image 20241021115313.png]]

Но поток сообщений не может соединять задачи внутри одного пула

![[Pasted image 20241021115343.png]]

Обычная сплошная стрелка - поток управления.
Так же существует **ассоциация**
![[Pasted image 20241021115634.png]]
Ассоциация - это элемент, который связывает артефакты с элементами BPMN. Она лишь показывает смысловую связь, но никак не влияет на работу процесса.
### Дорожки

Теоретически, это необязательный элемент, но на практике используется настолько часто, что многие считают его неотъемлемой частью любой схемы.
Дорожка представляет собой подписанный прямоугольник, внутри которого находятся элементы, которые выполняются на стороне сущности, указанной в заголовке дорожки.

![[Pasted image 20240817222901.png]]
							Пример с дорожками

![[Pasted image 20241021140147.png]]
![[Pasted image 20241021140338.png]]

### Артефакты

Артефакты - это набор элементов, которые не влияют на исполнение процесса, но дополняют диаграмму информацией. Артефакт не может быть ни целью, ни источником потока управления или потока сообщений. Связь элемента с артефактом выполняется с помощью ассоциации.
![[Pasted image 20241021141003.png]]
![[Pasted image 20241021141109.png]]
![[Pasted image 20241021141246.png]]


### Примечание

В статье есть классный пример с последовательным усложнением схемы от примитивной к подробной.
***


[[Моделирование требований]]
#Learn