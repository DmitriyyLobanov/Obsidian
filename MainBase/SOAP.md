2024-08-15 15:08

**SOAP** (Simple Object Access Protocol), простой протокол доступа к объектам, был предложен корпорацией Microsoft всего 2-мя годами раньше REST. А благодаря мощной корпоративной поддержке в рамках продвижения платформы .NET, SOAP широко распространился в различных системах enterprise-класса как средство межсистемной интеграции. В отличие от REST, он работает по принципу удаленного вызова процедур (RPC, Remote Procedure Call), когда через POST-запрос к 1-ой конечной точке клиент вызывает на сервере функцию, специфицированную в теле XML-сообщения.

>WSDL (Web Services Description Language) - это язык для описания веб-сервисов. Он используется для определения интерфейса веб-сервиса, включая методы, параметры и возвращаемые значения. WSDL обычно используется вместе с SOAP (Simple Object Access Protocol), который является протоколом для обмена сообщениями между веб-сервисами.

Хотя SOAP может работать с любым протоколом прикладного уровня (SMTP, FTP, HTTP, HTTPS), чаще всего он используется поверх HTTP. В качестве формата представления данных SOAP использует только язык разметки **_XML_**. Благодаря наличию строгой схемы данных (XSD) и встроенной обработке ошибок SOAP до сих пор активно используется во многих корпоративных сервисах, особенно связанных с финансами. Но из-за тяжеловесности XML-формата и правил формирования XML-сообщений, можно сказать, что SOAP сегодня теряет популярность и, в основном, применяется в так называемых legacy-системах, которые первоначально были разработаны в конце 90-хх гг.

Впрочем, сегодня RPC как технология межсистемной интеграции переживает второе рождение. Впервые возникнув в 80-х гг. XX века, она легла в основу SOAP, а в 2015 году была переосмыслена корпорацией Google под названием **gRPC**.

Преимущества:

- отраслевой стандарт по версии W3C;
- наличие строгой спецификации;
- широкая поддержка в продуктах Microsoft,
- однозначность.

Недостатки:

- сложность реализации;
- сложность/ресурсоемкость парсинга XML-данных.

Любое сообщение в протоколе SOAP — это XML документ, состоящий из следующих элементов (тегов):

- **Envelope.** Корневой обязательный элемент. Определяет начало и окончание сообщения.
- **Header.** Необязательный элемент — заголовок. Содержит элементы, необходимые для обработки самого сообщения. Например, идентификатор сессии.
- **Body.** Основной элемент, содержит основную информацию сообщения. Обязательный.
- **Fault.** Элемент, содержащий информацию об ошибках, возникающих в процессе обработки сообщения. Необязательный.

Пример SOAP запроса:

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/4a5/bce/ec1/4a5bceec15cd80a122081fba08ba6913.png)
 

Пример SOAP ответа:

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/f8b/f52/5e6/f8bf525e60d08f4dc5c41cdc168e5252.png)


[[Стили межсистемной интеграции по API]]
#Learn