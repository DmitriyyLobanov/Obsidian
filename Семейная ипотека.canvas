{
	"nodes":[
		{"id":"485f9b7c321fa5c1","type":"text","text":"\n\n<font size = '42'>Семейка!</font>","x":-152,"y":-445,"width":280,"height":110},
		{"id":"38b4a6a3485a3b68","type":"text","text":"1. Изучение постановок рестры\n2. Драфт постановки на FE\n3. BE по совещанию с разрабами\n","x":-457,"y":-145,"width":360,"height":220,"color":"4"},
		{"id":"2d0913a44a604fd1","type":"text","text":"integration-adapter существует по факту, но не отображен в ТИС и АИС, никто конкретно за него не отвечает, все добавляют в него методы по собственной нужде. \nАбсолютно всё что на нём есть можно увидеть только на репе.\n","x":-72,"y":-145,"width":545,"height":300,"color":"1"},
		{"id":"3580bbfdc564ef6a","type":"text","text":"Возможно придётся передавать инфу (собственно речь о изменившейся ставке) не только в ППКФЛ, но и в ОПС \"Отлагательные условия\"","x":-472,"y":225,"width":390,"height":220,"color":"4"},
		{"id":"61a0ff6a76de25fc","type":"text","text":"Что такое отлагательные условия кстати?","x":28,"y":335,"width":250,"height":60,"color":"3"},
		{"id":"8d965cf3979e0c2f","type":"text","text":"На 1442 \"Карточка ФЛ\"\nЕсть в БД анкета ПОДиФТ\nИ отдельно таблица blackList\n","x":-1000,"y":-398,"width":300,"height":145,"color":"3"},
		{"id":"714e0450386e95fc","type":"file","file":"Files/Pasted image 20241121164217.png","x":-1050,"y":-164,"width":400,"height":258},
		{"id":"0451bfbffa29847a","type":"file","file":"Files/Pasted image 20241121164436.png","x":-1450,"y":-520,"width":400,"height":299},
		{"id":"d864c48338da1b49","type":"file","file":"Files/Pasted image 20241121164526.png","x":-1450,"y":-940,"width":400,"height":321},
		{"id":"aa2e8f2437e99cd6","type":"text","text":"Если \"законные каникулы\" наша БО может проводиться, если там не последний платёж отложенных платежей.","x":660,"y":-145,"width":480,"height":645},
		{"id":"fbd3b2c11c34bbf0","type":"text","text":"Контакты:\nСистемный аналитик реструктуризации: https://t.me/Its_Britney_boez (Влад Романович)\nСистемный аналитик реструктуризации: https://t.me/starosekdan (Данил Старосек)","x":-621,"y":-940,"width":721,"height":158},
		{"id":"9aacc319f0cd2d6b","type":"text","text":"Если не писать самим оркестратор, то придется как \"каникулы\" перекладывать оркестрацию на 1830","x":153,"y":-1053,"width":250,"height":271,"color":"1"},
		{"id":"12e010533831ffc8","type":"text","text":"Вопросики:\n\n##### 2. Где живёт справочник проверок?\nДа нигде не живёт, каникулы и рестра его сами себе создали (каждый у себя прикопал)\n##### 3. Статус/результат живёт в app и все берут их там, или каждый может иметь их локально?\nРестра берёт у **app** и все должны стремиться к этому (это не таблицы, это enum)\n##### 4. Создание заявки \"оффлайн\" (по крайней мере на рестру)?\nтаблицу инфа на создание заявки - уточнить у Данила\n\n##### 7. Что такое OpsNext?\nСистема для ручного разбора заявок, рестра сейчас делает интеграцию\n##### 8. Что такое прикладная блокировка?\nНа время внесения изменений в договор он блокируется для защиты от одновременного внесения противоречивых данных, соответственно после этого блокировка снимается\n\n##### 9. Делаете ли автоматический прогон автоматических проверок при передаче в ПродПроцессор? И при каждом ретрае?\nДелают за счет шедулера\n\n","x":1240,"y":-1080,"width":1160,"height":1580,"color":"5"},
		{"id":"b13968131759e2d4","type":"text","text":"На 26.11.2024 приблизительные сроки вижу следующим образом:\n>Реструктуризация потратила 3 месяца на то чтобы привести БО в то состояние в котором она сейчас есть (кстати хз на каком они этапе, но сделали внушительно). Работали втроём.\n>У нас в команде два SA, сроки можно увеличить минимум на треть, ожидаемые 4 месяца до состояния похожего на уровень реструктуризации.","x":515,"y":-1320,"width":625,"height":220},
		{"id":"f7d4fbe14d549dc5","type":"text","text":"Сваггер реструктуризации:\nhttps://ipo-mlsrv-restructuring.ipo-sk1.apps.innodev.local/swagger-ui/index.html#/%D0%A0%D0%B5%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F/findHolidaysById","x":-1300,"y":385,"width":650,"height":495,"color":"4"},
		{"id":"679764d437565081","type":"text","text":"Нужны тела ответов методов.\n**ipo-mlsrv-integration-adapter**:\n\tGET /prodProcCredit/details    (ПродПроц 2199)\n\tGET /productProfile/details     (ПродПрофиль 1503)\n\tGET/client/{mdmid}                  (Карточка ФЛ 1442)\n","x":3077,"y":-1319,"width":523,"height":339,"color":"6"},
		{"id":"9e52b804930d565e","type":"text","text":"https://название-микросервиса.ipo-sk1.apps.innodev.local/swagger-ui.html#\n","x":2900,"y":-1460,"width":803,"height":60,"color":"6"},
		{"id":"abe78e591acefc52","type":"text","text":"Примерная декомпозиция:\n- [x] Модель данных БД\n- [x] Основные постановки от реструктуризации\n      (Проверки, эмуляция графика, создание/изменение/получение поручения и т.д. согласно нашим БТ, всё что можно переиспользовать)\n- [ ] Постановка на front по мере поступления экранных форм\n      (старт вёрстки на FE)\n- [ ] Разработка User Flow \n      (построение документа (расширение постановки) с перечислением методов взаимодействия FE и BE)\n- [ ] Проработать шедулеры\n    \n- [ ] Интеграция с OpsNext для ручного разбора заявок\n\n1. Модель данных\n2. REST endpoints\n3. FRONT работы\n4. Scheduler, логирование, мониторинг, аудит\n\nШедулеры (1438302):\n- [ ] Отложенное создание заявки (+ обновление заявки)\n- [ ] Повторные проверки\n- [ ] Отправка нотификации\n- [ ] Аннулирование заявок по времени (м.б несколько отдельных шедулеров, м.б. 1 универсальный)","x":520,"y":-1080,"width":625,"height":640,"color":"5"},
		{"id":"be3f2359e1ae6731","type":"text","text":"<font size = '42'>Дейли</font>\n\nВчера\nБыла встреча с представителем дсп по автоназначению заявки, человек пообещал выслать всю доступную информацию для заведения нужных нам записей в БДхах на employee и autoassignment.\nДописал в метод создания поручения методы, которые вероятно придётся использовать\nНачал погружаться в автопроверки, есть некоторые неоднозначные моменты, пойду сравнивать каникулы и рестру, буду общаться с аналитиками\n\nСегодня:\nПерепишу алгоритм метода автопроверок, продолжу проверять интеграции.\nКогда Сергей пришлёт инфу по ЦП, передам её Денису для заведения в нужных бд (так же нужно будет завести сущность нашей бизнес-операции).\n\n","x":-479,"y":586,"width":479,"height":554},
		{"id":"6005801d39473800","type":"file","file":"Files/Pasted image 20241208200011.png","x":-3840,"y":2256,"width":1684,"height":228},
		{"id":"52a3c3d3d3979212","type":"text","text":"Принято решение завести у себя атрибуты:\n1. Код филиала в том же виде, что у каникул\n2. Часовой пояс клиента **client_time_zone**","x":-3840,"y":2100,"width":420,"height":120,"color":"4"},
		{"id":"e2daca8b296501d0","type":"text","text":"Почему в БД нет явно прописанной связи \"Один к одному\" между сущностями \"Поручение\" и \"Запрос на создание поручения\" если она подразумевается в постановках и в коде?","x":-3864,"y":2880,"width":954,"height":100},
		{"id":"27ee05db6df31968","type":"text","text":"На схеме в локал вот так:","x":-3864,"y":3000,"width":250,"height":60},
		{"id":"56cc3506478ec228","type":"file","file":"Files/Pasted image 20241209230714.png","x":-3864,"y":3085,"width":954,"height":235},
		{"id":"6ae4228a64209e05","type":"text","text":"На st DB вот так:","x":-3864,"y":3360,"width":250,"height":60},
		{"id":"6a830e6938eddaee","type":"file","file":"Files/Pasted image 20241210094644.png","x":-3864,"y":3440,"width":465,"height":460},
		{"id":"b4a9c40a3bb8170b","type":"text","text":"На создании поручения вот так:","x":-3864,"y":3920,"width":427,"height":60},
		{"id":"0aa7356df234d870","type":"file","file":"Files/Pasted image 20241209231035.png","x":-3864,"y":3980,"width":889,"height":260},
		{"id":"b6671a08c558fc80","type":"text","text":"А вот потому что и таблицы то такой нет \"запрос на создание поручения\", оказывается есть таблица \"гарантор консистентности поручения\", немного переработанная первая таблица в которой есть uuid записи и возможность помечать записи как СОЗДАНИЕ/ОБНОВЛЕНИЕ поручения. \nСоответственно связь с основной таблицей поручения там \"один ко многим\"","x":-2844,"y":2880,"width":752,"height":367,"color":"4"},
		{"id":"9456ed25e07b8963","type":"file","file":"Files/Pasted image 20241210101938.png","x":-2844,"y":3306,"width":1013,"height":274},
		{"id":"05123cebce5b4c4f","type":"file","file":"Files/Pasted image 20241210103738.png","x":-2844,"y":3660,"width":1013,"height":278},
		{"id":"00ac227ae62efbd2","type":"text","text":"Новая таблица","x":-2353,"y":3253,"width":250,"height":60},
		{"id":"3d8eab3e6d8fbe40","type":"text","text":"Старая таблица","x":-2353,"y":3600,"width":250,"height":60},
		{"id":"6c1a216e0010662b","type":"text","text":"Принято решение переделать таблицу \"данные для создания заявки\", но с обязательным UUID, вынесенным в отдельный атрибут type и измененными неймингами.","x":-3864,"y":2740,"width":866,"height":120,"color":"4"},
		{"id":"7147a5ceaab055a5","type":"text","text":"\n\n<font size = '42'>Создание поручения!</font>","x":3145,"y":3931,"width":561,"height":140,"color":"6"},
		{"id":"705fba97e83a4edb","type":"text","text":"1. Добыть и проанализировать тела запроса на создание поручения на рестре и каникулах. (прям поатрибутно, чтобы небыло белых пятен)\n   В сваггерах, ТкР-ах, по запросу, как угодно.","x":3905,"y":3672,"width":388,"height":201,"color":"5"},
		{"id":"a7af43692a827ff3","type":"text","text":"Сваггер рестры:\nhttps://ipo-mlsrv-restructuring.ipo-sk1.apps.innodev.local/swagger-ui/index.html","x":4400,"y":3150,"width":821,"height":60,"color":"4"},
		{"id":"1b4acfd4dc5a32fa","type":"text","text":"2. Прочитать постановки на создание поручения на рестре и каникулах, пометить вопросами всё что непонятно.","x":3905,"y":4312,"width":388,"height":132,"color":"5"},
		{"id":"d4eb7a2002e35828","type":"text","text":"\n| <font size = '42'>Создание поручения КАНИКУЛЫ!</font>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| **Алгоритм работы**<br><br>1. Сервис валидирует запрос<br><br>1.1. Если во входящих данных запроса **POST /holidays** не пришел **assigneeId** - взять значение из переменной окружения = **7794**, ID технического пользователя виртуального подразделения с **ext_id** = 999999999.<br>Во входящих обязательно передать атрибут **holidaysId**    <span style=\"color:red\"> (что за переменная подразумевается? Какая то техничка-затычка?)</span>.<br><br>1.2. Если **approvedDecision = true** - обязательно должны быть заполнены условно-обязательные параметры: <br>**startHolidaysDate**, **endHolidaysDate**, **durationPeriod**, **requestHolidaysDate**, **branch**, **timeZoneDiff, planningTerminationDate** <span style=\"color:red\"> но ведь может быть не пройдена не фатальная проверка и заявка всё равно будет создана заявка, этот же brabch мог бы наверное быть полезным</span><br><br>1.3. Если **approvedDecision = false** - обязательно должны быть заполнены условно-обязательные параметры: **rejectionCheckCode**<br><br>2. Выполнить проверку, есть ли в [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) **holidays_monitoring** раннее созданные поручения (для предотвращения дублей)<br><br>2.1. Если по условиям ниже найдены записи - сервис возвращает ошибку **409 Conflict**<br><br>- **mdm_id** = applicant.extId <br><br>- **public_id** = contract.extId<br><br>- **holidays_type_id** = holidaysTypeId<br><br>- **approved_decision** = approvedDecision<br><br>- **status_name** = statusName <span style=\"color:red\"> то есть дубликат с другим набором статусов - не будет считаться дубликатом?</span><br><br>- **mlsrv_id** = null <span style=\"color:red\">это же статус заявки? А если уже было создано поручение по которому была создана заявка?</span><br><br><br>3. Сервис подготавливает транзакцию:<br><br>- сервис создает в таблице **app_create_request** запись заявки (там хранятся данные для заявки **app**)  <span style=\"color:red\"> откуда берётся инфа? блоки application, applicant и т.д.</span><br><br>- создает поручение на подключение / отключение каникул в [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) **holidays_monitoring**  <br>- cвязывает его с записью из таблицы **app_create_request** \\|\\| holidays_id = id \\|\\| **holidays_monitoring**  <br>3.1. Если транзакция не выполнилась - вернуть ошибку и завершить алгоритм работы <span style=\"color:red\">если не произошел commit, происходит rollback?</span><br><br><br>4. Сервис отправляет запрос [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507) на сервис **1491_14.ipo-mlsrv-app**  <br>- входной параметр statusId \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507) = числовое значение enum **StatusNames** = statusName \\|\\| [POST /holidays](https://sfera.vtb.ru/documents/spaces/0/artifacts/61520#46255508)  <br>- входной параметр resultId \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507) = числовое значение enum **ResultNames** = resultName \\|\\| [POST /holidays](https://sfera.vtb.ru/documents/spaces/0/artifacts/61520#46255508)<br><br>5. Сервис **1491_14.ipo-mlsrv-app** возвращает ответ  <br>5.1. Если сервис **1491_14.ipo-mlsrv-app** вернул ответ **!= 200 OK** (retry 3 раза) - сервис **1491_14.ipo-mlsrv-holidays** возвращает ответ **200 OK** и завершает алгоритм работ. <span style=\"color:red\">почему 3 раза, и с какой задержкой?</span><br><br>В выходных параметрах возвращается значение созданного id и applicationId = null. <br>Заявка в **1491_14.ipo-mlsrv-app** будет создана в офлайне с помощью шедуллера на **mlsrv-holidays.**  <br>5.2. Если сервис **1491_14.ipo-mlsrv-app** вернул ответ **200 OK** - cервис **1491_14.ipo-mlsrv-holidays** сохраняет в [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) **holidays_monitoring**  <br>- **mlsrv_id** = id \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507)  <br>- **app_status_id** = входной параметр **statusId** \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507)  <br>- **app_result_id** = входной параметр **resultId** \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507)  <br>5.2.1. Если **mlsrv_id** не удалось сохранить по причине недоступности [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) - сервис возвращает ответ **200 OK** и завершает алгоритм работы (значения проставится в офлайне с помощью шедуллера на **mlsrv-holidays**)  <br>5.2.2. Если не удалось обработать ответ от **app** по причине недоступности **mlsrv-holidays** - сервис возвращает ответ **200 OK** и завершает алгоритм работы (значения проставится в офлайне с помощью шедуллера на **mlsrv-holidays**)  <br>5.2.3. Если значения удалось сохранить и удалось обработать ответ от **app** - сервис возвращает **200 OK** с выходными параметрами и завершает алгоритм работы |\n\n","x":5475,"y":4312,"width":1885,"height":1115},
		{"id":"daf25cd6cdf2c469","type":"text","text":"\n| <font size = '42'>Создание поручения РЕСТРА!</font>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| ## Алгоритм работы<br><br>1. Сервис валидирует запрос<br>    <br>    1. Если **isProductSecuritized** **= true** вызывает метод **GET/v2/department/target/{sapId}** и во входных параметрах передает **sapId** =  ****50646661.****  <span style=\"color:red\"> (что за GET/v2/department/target/{sapId}, на каком он адаптере? что за 50646661?)</span><br>Из выходных параметров сервис берет значение **id** (идентификатор подразделения) и вызывает метод **GET/v2/employee/techUser** и ищет тех. учетную запись. Полученное значение  выходного параметра **id** заполняет в ******assigneeId.******<br>        <br>    2. Если ******isProductSecuritized** **=** false****, тогда сервис продолжает работу согласно алгоритму****.**** <span style=\"color:red\"> почему если кредит не секьюритизирован не нужно проставлять id исполнителя?</span><br>        <br>          <br>        <br>    3. Если **rejectionCheckCode IS NULL** - обязательно должы быть заполнены условно-обязательные параметры: **startDate, endDate, requestClientDate, extension, deferment.**  <br>        <br>    4. Если **rejectionCheckCode IS NOT NULL** - в зависимости от проваленной проверки требуется выполнить логику, описанную в [Шаг №2 Проверки](https://sfera.inno.local/knowledge/pages?id=1357906), <br>возможны варианты: создать отказную заявку - если ошибка фатальная, продолжить заведение заявки - если нефатальная и т.д. <span style=\"color:red\">что происходит если не пройдено несколько проверок, а не одна?</span><br>        <br>2. Выполнить проверку, есть ли в [БД](https://sfera.inno.local/knowledge/pages?id=1354083) **restructuring_monitoring** ранее созданные поручения (для предотвращения дублей). Если по условиям ниже найдены записи - сервис возвращает ошибку **409 Conflict.**<br>    <br>    - **mdm_id** = applicant.extId <span style=\"color:red\">проверяете только дубль \"новой заявки\"?  app_reuslt_id=resultId, application_id = null</span><br>        <br>    - **public_id** = contract.extId<br>        <br>    - **scheme** = restructuringScheme  <br>        <br>    - **app_result_id** = resultId<br>        <br>    - **application_id**= null<br>        <br>3. Сервис подготавливает транзакцию:<br>    <br>    1. Сервис создаёт в таблице **restructuring_app_consistency_guarantor** запись заявки (в ней хранятся данные для заявки **арр**) <span style=\"color:red\">в json есть инфа которой нет во входящих параметрах метода, откуда она берется?(azsId, stageId, collaterals и т.д.)</span><br>        <br>    2. Создаёт поручение на проведение реструктуризации в  [БД](https://sfera.inno.local/knowledge/pages?id=1354083)  **restructuring_monitoring**<br>        <br>    3. Сервис записывает в  [БД](https://sfera.inno.local/knowledge/pages?id=1354083)  **restructuring_monitoring** <br>        <br>        1. app_result_id = входной параметр **resultId \\|\\| **POST /api/v1/restructuring****<br>            <br>        2. app_status_id = числовое значение **app_status_id** соответствющий **app_result_id**  в enum \"Соответствие статусов и результатов заявки\".<br>            <br>        3. rejection_check_code = rejectionCheckCode \\|\\| входной параметр **POST /api/v1/restructuring****,** если rejectionCheckCode != null<br>            <br>    4.  Если данные в БД не обновились - сервис возвращает !=200 ОК и прекращает алгоритм работы.<br>        <br>    5. Если данные в БД обновились - сервис продолжает работу согласно алгоритму.<br>        <br>    6. Связывает его с записью из таблицы **restructuring_app_consistency_guarantor** \\|\\| restructuring_id =  id \\|\\| **restructuring_monitoring.** Если транзакция не выполнилась - вернуть ошибку и завершить алгоритм работы.<br><span style=\"color:red\">здесь происходит commit/rollback транзакции?</span><br>        <br>4. Сервис отправляет запрос <br>    <br>    **POST /api/v1/restructuring** на сервис **1491_14.ipo-mlsrv-app** <span style=\"color:red\">на app нет такого метода</span><br>    <br>    1. Входной параметр statusId \\|\\| **POST/v2/application =** числовое значение app_status_id  \\|\\| [БД](https://sfera.inno.local/knowledge/pages?id=1354083)  **restructuring_monitoring**<br>        <br>    2. Входной параметр resultId \\|\\| **POST/v2/application =** числовое значение resultId \\|\\| **POST /api/v1/restructuring**<br>        <br>5. Сервис <br>    <br>    **1491_14.ipo-mlsrv-app** <br>    <br>    возвращает ответ<br>    <br>    1. Если сервис **1491_14.ipo-mlsrv-app** вернул **!= 200 ОК** - retry 3 раза, затем сервис **1491_14.ipo-mlsrv-**restructuring-storage**** возвращает **200 ОК** и завершает алгоритм работы. <span style=\"color:red\">storage - это шедулер? Почему 3 раза?</span><br>В выходных параметрах возвращается значение созданного id и applicationId = null. Заявка **1491_14.ipo-mlsrv-app** будет создана в оффлайне с помощью шедуллера на **mlsrv-restructuring**. <br>        <br>    2. Если сервис  **1491_14.ipo-mlsrv-app** вернул **200 ОК** - сервис  **1491_14.ipo-mlsrv-**restructuring-storage**** сохраняет в  [БД](https://sfera.inno.local/knowledge/pages?id=1354083)   **restructuring_monitoring**<br>        <br>        - **application_id**= **id** \\|\\| **POST/v2/application**  <br>            <br>        - **app_status_id =** входной параметр **statusId \\|\\| **POST/v2/application****  <br>            <br>        - **app_result_id =** входной параметр **resultId \\|\\| **POST/v2/application****  <br>            <br>            - Если **application_id** не удалось сохранить по причине недоступности БД - сервис **1491_14.ipo-mlsrv-**restructuring-storage**** возвращает **200 ОК** и завершает алгоритм работы (значение проставится в оффлайне с помощью шедуллера на **mlsrv-restructuring**).<br>                <br>            - Если не удалось обработать ответ от **app** по причине недоступности **mlsrv-restructuring** - сервис возвращает **200 ОК** и завершает алгоритм работы (значение проставится в оффлайне с помощью шедуллера на **mlsrv-restructuring**).<br>                <br>            - Если значения удалось сохранить и удалось обработать ответ от **арр** - сервис возвращает **200 ОК** с выходными параметрами и завершает алгоритм работы. |\n\n","x":5475,"y":5560,"width":2085,"height":1880},
		{"id":"311ddbf6736e6f32","type":"text","text":"<font size = '42'>POST/api/v1/restructuring - ОТВЕТ</font>\n```json\n{\n  \"id\": 5153135,          //id поручения на проведение рестры\n  \"applicationId\": 515    //id заявки в app\n}\n```","x":6960,"y":2077,"width":1100,"height":259},
		{"id":"d8d7c4b368bccc07","type":"text","text":"У каникул не работает сваггер!","x":4400,"y":3260,"width":250,"height":60,"color":"1"},
		{"id":"26508692226d1aaf","type":"text","text":"<font size = '42'>POST/api/v1/restructuring - ЗАПРОС</font>\n\n```json\n{\n  \"scheme\": \"LOAN_EXTENSION\",                          //Схема реструктуризации\n  \"startDate\": \"2024-09-25\",                           //дата начала рестры\n  \"endDate\": \"2024-11-25\",                             //дата окончания рестры\n  \"requestClientDate\": \"2024-09-25\",                   //дата обращения клиента\n  \"deferment\": 6,                                      //кол-во месяцев отсрочки уплаты основного долга\n  \"extension\": 12,                                     //кол-во месяцев увеличения срока кредита\n  \"publicId\": \"90A78254D6654AAD97AC198F6B62A3C9\",      //публичный id продукта в 1503 ПродПроф\n  \"productId\": \"a8513564-bcd3-443f-98cf-64361c907fac\", //id продукта в ПП2199\n  \"rejectionCheckCode\": \"MaxCreditPeriodAll\",          //код непройденной проверки\n  \"isProductSecuritized\": false,                       //признак секьюритизированного кредита\n  \"resultId\": 2,                                       //id результата заявки\n  \"application\": {                                     //данные для создания заявки\n    \"stageId\": 3243,                                   //id этапа\n    \"priorityId\": 2,                                   //id приоритета\n    \"contract\": {                                      //данные кредитного дела\n      \"extId\": \"OIUE9u2734798H7783\",                   //публичный id продукта в 1503 ПродПроф\n      \"contractNumber\": \"V623/0000-0000060\",           //номер договора\n      \"contractDate\": \"2020-08-12\",                    //дата заключения договора\n      \"contractProductId\": \"КРФЛ\",                     //идентификатор продукта\n      \"contractSalePoint\": \"3900\",                     //точка заключения договора\n      \"collaterals\": [                                 //залоги\n        {\n          \"collateralCode\": \"3.1.2.1\"                  //код типа залога\n        }\n      ]\n    },\n    \"applicant\": {                                     //данные заявителя\n      \"extId\": \"124432\",                               //Идентификатор клиента mdm id\n      \"lastName\": \"Гафниев\",\n      \"firstName\": \"Герман\",\n      \"middleName\": \"Гальевич\",\n      \"birthDate\": \"1996-06-18\",\n      \"segment\": \"Mass\",\n      \"documents\": [\n        {\n          \"series\": \"6000\",\n          \"number\": \"234567\",\n          \"documentTypeId\": 1\n        }\n      ],\n      \"contacts\": [\n        {\n          \"contactTypeId\": 1,                            //1 - phone, 2 - mail\n          \"contact\": \"9028763892\"\n        }\n      ]\n    },\n    \"applicationTypeCode\": \"BO_236\",                     //Код типа заявки \"ВО_236\"\n    \"description\": \"Первичная консультация\",             //на рестре не заполняют\n    \"currentUserId\": 1,                                  //пользователь проводящий операцию, = creatorId\n    \"sourceSystem\": \"ВТБПро\",                            //система источник заявки\n    \"plannedStartDate\": \"2024-08-22\",                    //Плановая дата начала выполнения заявки\n    \"plannedEndDate\": \"2024-09-22\",                      //плановая дата выполнения заявки\n    \"registrationDate\": \"2024-12-10T12:55:19.530Z\",      //дата и время регистрации заявки\n    \"creatorId\": 2,                                      //id сотрудника инициатора\n    \"assigneeId\": 7794,                                  //id сотрудника исполнителя\n    \"relationType\": \"Debtor\"                             //роль клиента в договоре\n  }\n}\n```","x":5480,"y":1840,"width":1100,"height":992},
		{"id":"5f5d39e9fa20e1bc","type":"text","text":"<font size = '42'>POST/holidays - ОТВЕТ</font>\n```json\n{\n  \"id\": 5153135,          //id поручения на проведение рестры\n  \"applicationId\": 515    //id заявки в app\n}\n```","x":6960,"y":3596,"width":1100,"height":259},
		{"id":"49f85e80ac7cad14","type":"text","text":"<font size = '42'>Сравнение \"бизнес\" части запросов на создание поручения</font>\n\n| поля Каникул                                | поля Реструктуризации                          | поля Семейной ипотеки                                  |\n| ------------------------------------------- | ---------------------------------------------- | ------------------------------------------------------ |\n| Идентификатор типа каникул                  | Схема реструктуризации                         | Публичный id продукта в 1503                           |\n| Код основания для предоставления каникул    | Дата начала реструктуризации                   | Идентификатор экземпляра продукта в 2199               |\n| Идентификатор заявителя по 377 каникулам    | Дата окончания реструктуризации                | Дата обращения клиента                                 |\n| Дата начала каникул                         | Дата обращения клиента                         | Дата фактического проведения снижения ставки           |\n| Дата окончания каникул                      | Кол-во месяцев отсрочки уплаты основного долга | Дата начала действия сниженной ставки                  |\n| Период подключения каникул                  | Кол-во месяцев увеличения срока кредита        | Код филиала банка                                      |\n| Дата обращения клиента                      | Публичный id продукта в 1503                   | Часовой пояс клиента                                   |\n| Публичный id продукта в 1503                | Идентификатор экземпляра продукта в 2199       | Процентная ставка                                      |\n| Идентификатор экземпляра продукта в 2199    | Код непройденной проверки                      | Признак обогащения кредитного договора (НА ИЗМЕНЕНИЕ!) |\n| Код филиала банка                           | Признак секьюритизированного кредита           | Код непройденной проверки                              |\n| Таймзона                                    | Идентификатор результата заявки                | Результат заявки                                       |\n| Признак положительного решения по проверкам |                                                |                                                        |\n| Статус поручения                            |                                                |                                                        |\n| Результат заявки                            |                                                |                                                        |\n| Код непройденной проверки                   |                                                |                                                        |\n| Планируемая дата отключения каникул         |                                                |                                                        |\n| Флаг маркетингового предложения             |                                                |                                                        |\n\n","x":8680,"y":2520,"width":1840,"height":876},
		{"id":"3c9c65d0d857f2f4","type":"text","text":"4. Написать собственную постановку на создание поручения.","x":3920,"y":8640,"width":388,"height":80,"color":"5"},
		{"id":"ea956ed38117175c","type":"text","text":"3. Пообщаться с аналитиками с рестры и каникул по итогу изысканий.","x":3920,"y":8280,"width":388,"height":80,"color":"5"},
		{"id":"79d867a0815b5bb8","type":"text","text":"\n| <font size = '42'>Создание поручения КАНИКУЛЫ!</font>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| **Алгоритм работы**<br><br>1. Сервис валидирует запрос<br><br>1.1. Если во входящих данных запроса **POST /holidays** не пришел **assigneeId** - взять значение из переменной окружения = **7794**, ID технического пользователя виртуального подразделения с **ext_id** = 999999999.<br>Во входящих обязательно передать атрибут **holidaysId**    <span style=\"color:red\"> (что за переменная подразумевается? Какая то техничка-затычка?)</span>.<br><span style=\"color:green\">Жестко забитые на беке переменные, может быть один на все наши БО</span><br><br>1.2. Если **approvedDecision = true** - обязательно должны быть заполнены условно-обязательные параметры: <br>**startHolidaysDate**, **endHolidaysDate**, **durationPeriod**, **requestHolidaysDate**, **branch**, **timeZoneDiff, planningTerminationDate** <span style=\"color:red\"> но ведь может быть не пройдена не фатальная проверка и заявка всё равно будет создана заявка, этот же brabch мог бы наверное быть полезным</span><br><span style=\"color:green\">Заполняется потому что проверки пройдены, если нет, то только код непройденной проверки</span><br><br>1.3. Если **approvedDecision = false** - обязательно должны быть заполнены условно-обязательные параметры: **rejectionCheckCode**<span style=\"color:green\">Проверки выполняются последовательно, все, но в реджектЧекКод идет одна - самая приоритетная</span><br><br>2. Выполнить проверку, есть ли в [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) **holidays_monitoring** раннее созданные поручения (для предотвращения дублей)<br><br>2.1. Если по условиям ниже найдены записи - сервис возвращает ошибку **409 Conflict**<br><br>- **mdm_id** = applicant.extId <br><br>- **public_id** = contract.extId<br><br>- **holidays_type_id** = holidaysTypeId<br><br>- **approved_decision** = approvedDecision<br><br>- **status_name** = statusName <span style=\"color:red\"> то есть дубликат с другим набором статусов - не будет считаться дубликатом?</span><br><br>- **mlsrv_id** = null <span style=\"color:red\">это же статус заявки? А если уже было создано поручение по которому была создана заявка?</span><br><span style=\"color:green\">На всякий случай если что то отвалилось, если post/holidays сработал, но в app заявка не создалась. Подстраховка в общем</span><br><br>3. Сервис подготавливает транзакцию:<br><br>- сервис создает в таблице **app_create_request** запись заявки (там хранятся данные для заявки **app**)  <span style=\"color:red\"> откуда берётся инфа? блоки application, applicant и т.д.</span><br><span style=\"color:green\">На создание заявки каждая команда при необходимости добавляет свои атрибуты</span><br><br>- создает поручение на подключение / отключение каникул в [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) **holidays_monitoring**  <br>- cвязывает его с записью из таблицы **app_create_request** \\|\\| holidays_id = id \\|\\| **holidays_monitoring**  <br>3.1. Если транзакция не выполнилась - вернуть ошибку и завершить алгоритм работы <span style=\"color:red\">если не произошел commit, происходит rollback?</span><br><span style=\"color:green\">Перед созданием заявки нужно засунуть криэйт реквест, поэтому нужно создать записи в двух таблицах, если не что то из двух не записалась - роллбек</span><br><br>4. Сервис отправляет запрос [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507) на сервис **1491_14.ipo-mlsrv-app**  <br>- входной параметр statusId \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507) = числовое значение enum **StatusNames** = statusName \\|\\| [POST /holidays](https://sfera.vtb.ru/documents/spaces/0/artifacts/61520#46255508)  <br>- входной параметр resultId \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507) = числовое значение enum **ResultNames** = resultName \\|\\| [POST /holidays](https://sfera.vtb.ru/documents/spaces/0/artifacts/61520#46255508)<br><br>5. Сервис **1491_14.ipo-mlsrv-app** возвращает ответ  <br>5.1. Если сервис **1491_14.ipo-mlsrv-app** вернул ответ **!= 200 OK** (retry 3 раза) - сервис **1491_14.ipo-mlsrv-holidays** возвращает ответ **200 OK** и завершает алгоритм работ. <span style=\"color:red\">почему 3 раза, и с какой задержкой?</span><br><span style=\"color:green\">Просто договоренность такая ещё три попытки и если нет, то шедулер потом сам</span><br><br>В выходных параметрах возвращается значение созданного id и applicationId = null. <br>Заявка в **1491_14.ipo-mlsrv-app** будет создана в офлайне с помощью шедуллера на **mlsrv-holidays.**  <br>5.2. Если сервис **1491_14.ipo-mlsrv-app** вернул ответ **200 OK** - cервис **1491_14.ipo-mlsrv-holidays** сохраняет в [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) **holidays_monitoring**  <br>- **mlsrv_id** = id \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507)  <br>- **app_status_id** = входной параметр **statusId** \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507)  <br>- **app_result_id** = входной параметр **resultId** \\|\\| [POST /v2/application](https://sfera.vtb.ru/documents/spaces/0/artifacts/21172#6979507)  <br>5.2.1. Если **mlsrv_id** не удалось сохранить по причине недоступности [БД](https://sfera.vtb.ru/documents/spaces/0/artifacts/61536#26173525) - сервис возвращает ответ **200 OK** и завершает алгоритм работы (значения проставится в офлайне с помощью шедуллера на **mlsrv-holidays**)  <br>5.2.2. Если не удалось обработать ответ от **app** по причине недоступности **mlsrv-holidays** - сервис возвращает ответ **200 OK** и завершает алгоритм работы (значения проставится в офлайне с помощью шедуллера на **mlsrv-holidays**)  <br>5.2.3. Если значения удалось сохранить и удалось обработать ответ от **app** - сервис возвращает **200 OK** с выходными параметрами и завершает алгоритм работы |\n\n","x":5475,"y":7525,"width":1885,"height":1115},
		{"id":"75c891811adf35ff","type":"text","text":"\n| <font size = '42'>Создание поручения. Тезисы и вопросы к написанию постановки </font> |\n| ------------------------------------------------------------------------------------- |\n\n1. Выяснить как заполняется assigneeId\n   - [x] Вычитать в БТ момент создания заявки, акцент на действующее лицо\n   - [x] Найти в артефактах инфу по **mlsrv-autoassigment**\n   - [x] Найти и смаппить потенциально полезные методы и справочники\n   - [x] Связаться с кем то по этому мкс и выяснить всё окончательно.\n\n2. Выяснить как происходит ветвление на фронте относительно создания заявки\n","x":5475,"y":8800,"width":1045,"height":1115},
		{"id":"c9bf876186ea32cd","type":"file","file":"Files/Pasted image 20241217133026.png","x":-3864,"y":4600,"width":584,"height":677},
		{"id":"e0c541b0777787f0","type":"text","text":"Была не понятна природа этих хедеров. Из разговора с аналитиком каникул выяснилось следующее:\n-\"То-есть я прав и bff на наш бек прокидывает с запросом эти хедеры, которые потом бек передаёт на app с запросом на создание заявки\"\n-\"Грубо говоря да\"","x":-3870,"y":4420,"width":866,"height":140,"color":"4"},
		{"id":"a33fda7a478489c8","type":"text","text":"<font size = '42'>POST/holidays - ЗАПРОС</font>\n\n```json\n{\n  \"holidaysApplication\": {                               //данные по поручению\n    \"holidaysTypeId\": 4,                                 //id типа каникул\n    \"holidayBaseCode\": 6,                                //код основания для предоставления каникул\n    \"holidaysDeclareId\": 4,                              //id заявителя по 377 каникулам\n    \"startHolidaysDate\": \"2020-08-12\",                    //дата начала каникул, обязателен если approveDecision==true\n    \"endHolidaysDate\": \"2020-08-12\",                      //дата окончания каникул, обязателен если approveDecision==true\n    \"durationPeriod\": 3,                                 //период подключения каникул\n    \"requestHolidaysDate\": \"2020-08-12\",                 //дата обращения клиента, обязателен если approveDecision==true\n    \"publicId\": \"string\",                                //публичный id продукта в 1503\n    \"productId\": \"string\",                                //id жкземпляра продукта в 2199\n    \"branch\": \"00056\",                                   //код филиала банка, обязателен если approveDecision==true\n    \"timeZoneDiff\": \"+7\", \n    \"approvedDecision\": \"false\",                         //признак положительного решения по проверкам\n    \"statusName\": \"string\",                              //статус поручения\n    \"resultName\": \"string\",                              //результат заявки\n    \"rejectionCheckCode\": \"string\",                      //код непройденной проверки\n    \"planningTerminationDate\": \"2020-08-12\",             //планируемая дата окончания каникул\n    \"isMarketingOffer\": \"false\",                         //флаг маркетингового предложения\n  },                                       \n  \"application\": {                                     //данные для создания заявки\n    \"stageId\": 3243,                                   //id этапа\n    \"priorityId\": 2,                                   //id приоритета\n    \"contract\": {                                      //данные кредитного дела\n      \"extId\": \"OIUE9u2734798H7783\",                   //публичный id продукта в 1503 ПродПроф\n      \"contractNumber\": \"V623/0000-0000060\",           //номер договора\n      \"contractDate\": \"2020-08-12\",                    //дата заключения договора\n      \"contractProductId\": \"КРФЛ\",                     //идентификатор продукта\n      \"contractSalePoint\": \"3900\",                     //точка заключения договора\n      \"collaterals\": [                                 //залоги\n        {\n          \"collateralCode\": \"3.1.2.1\"                  //код типа залога\n        }\n      ]\n    },\n    \"applicant\": {                                     //данные заявителя\n      \"extId\": \"124432\",                               //Идентификатор клиента mdm id\n      \"lastName\": \"Гафниев\",\n      \"firstName\": \"Герман\",\n      \"middleName\": \"Гальевич\",\n      \"birthDate\": \"1996-06-18\",\n      \"segment\": \"Mass\",\n      \"documents\": [\n        {\n          \"series\": \"6000\",\n          \"number\": \"234567\",\n          \"documentTypeId\": 1\n        }\n      ],\n      \"contacts\": [\n        {\n          \"contactTypeId\": 1,                            //1 - phone, 2 - mail\n          \"contact\": \"9028763892\"\n        }\n      ]\n    },\n    \"applicationTypeCode\": \"BO_236\",                     //Код типа заявки \"ВО_236\"\n    \"description\": \"Первичная консультация\",             //на рестре не заполняют\n    \"currentUserId\": 1,                                  //пользователь проводящий операцию, = creatorId\n    \"sourceSystem\": \"ВТБПро\",                            //система источник заявки\n    \"plannedStartDate\": \"2024-08-22\",                    //Плановая дата начала выполнения заявки\n    \"plannedEndDate\": \"2024-09-22\",                      //плановая дата выполнения заявки\n    \"registrationDate\": \"2024-12-10T12:55:19.530Z\",      //дата и время регистрации заявки\n    \"creatorId\": 2,                                      //id сотрудника инициатора\n    \"assigneeId\": 7794,                                  //id сотрудника исполнителя\n    \"relationType\": \"Debtor\"                             //роль клиента в договоре\n  }\n}\n```","x":5460,"y":3160,"width":1100,"height":992},
		{"id":"4ff6503eeeea1c07","type":"text","text":"Что с телами ответов? Как фронт понимает какое ветвление должно быть использовано, если метод создания имеет\nв ответе только идентификаторы поручения и заявки (опционально)","x":-3840,"y":5680,"width":935,"height":126,"color":"1"},
		{"id":"cb8a4eb2b0f1ba4d","type":"text","text":"Спросить у рестры зачем у них вызывается метод создания поручения при непрохождении фатальной проверки. Дело в БТ? Или недосмотр?","x":-3358,"y":5988,"width":878,"height":212,"color":"1"},
		{"id":"fa088b8c087fd448","type":"file","file":"Files/Pasted image 20241217165406.png","x":-3840,"y":5820,"width":1668,"height":133},
		{"id":"a9166c426d63a0c7","type":"text","text":"Принято решение не вызывать метод создания поручения при результате от метода автопроверок, означающем фатальную ошибку.\nНа фронте маршрутизируем на страницу с отказом и всё.","x":-3840,"y":5520,"width":866,"height":140,"color":"4"},
		{"id":"e22a29db9ae53e0a","x":6822,"y":8887,"width":2416,"height":113,"type":"file","file":"Files/Pasted image 20241219095507.png"},
		{"id":"9e3df1215a470890","x":6822,"y":9224,"width":1915,"height":134,"type":"file","file":"Files/Pasted image 20241219110819.png"},
		{"id":"e38bfcdda7292376","type":"text","text":"Рестра завязана на секьюритизацию кредита, если кредит секьюритизирован то заявка назначается на ЦП 5, если нет, то назначение БУДЕТ реализовано на 4 основные ЦП","x":6822,"y":9120,"width":874,"height":80,"color":"1"},
		{"id":"3d152336fe83a5cf","type":"text","text":"У нас прописано что сотрудник МС, что это? Кто это?\nПодразумевается что в коде договора есть зашитый код доп офиса, который привязан к конкретному ЦП, нужно выяснить есть ли интеграция с системой в которой эти справочники живут и использовать её, ну или если её нет, временно захардкодить значения и позже проработать интеграцию\n","x":6822,"y":9440,"width":874,"height":160,"color":"1"},
		{"id":"d575feeb919c0d4b","x":201,"y":1060,"width":1658,"height":160,"type":"file","file":"Files/Pasted image 20241219114856.png"},
		{"id":"d8afd301149cedf9","x":201,"y":940,"width":579,"height":87,"color":"1","type":"text","text":"Обогащение данных:\nСогласно БТ мы должны вызывать методы для автоматического наполнения с бека и хранить данные в БД"},
		{"id":"d1cdfec392131981","x":6822,"y":8800,"width":874,"height":60,"color":"1","type":"text","text":"Каникулы захардкодили этот момент и всегда используют одно и тоже "},
		{"id":"b883a4748fc81596","type":"text","text":"\n| <font size = '42'>Обновление поручения. Тезисы и вопросы к написанию постановки </font> |\n| --------------------------------------------------------------------------------------- |\n\n1. если rejectionCheckCode != null - прописать ошибки, !=200 ок это недостаточно, если **rejectionCheckCode == значению, соответствующему BLOCKING или NON_BLOCKING** необходимо произвести проверку на то, что проверка соответствует **is_active == true.** Так же нужно вопрос: мы же на повторных проверках пуляем только блокирующие, но \n   Нужно проработать кейс с тем, что нам как минимум тестировщик может прокинуть код фатальной ошибки, так же на уровне валидации этот момент продумать.\n2. Если ответ от app !=200 ОК - сервис продолжает алгоритм работы (здесь будет шедулер). Не прописана логика создания записи в аутбокс, создания связи между записями. Шедулер то оно понятно, но должна быть описана логика создания записи в аутбоксе, потому что шедулер будет брать записи там\n   ","x":5475,"y":10040,"width":1045,"height":1115},
		{"id":"3df1b1223087609a","type":"text","text":"\n\n<font size = '42'>Обновление поручения!</font>","x":3145,"y":10458,"width":561,"height":162,"color":"6"},
		{"id":"065d09ce375c5e1a","type":"text","text":"4. Провести ревью постановки от Маши.","x":3920,"y":10488,"width":388,"height":80,"color":"5"},
		{"id":"1fdd8a7c56eb3849","x":6822,"y":9620,"width":400,"height":86,"type":"file","file":"Files/Pasted image 20241219112613.png"},
		{"id":"5a40b7480f4dab96","x":9880,"y":9013,"width":977,"height":427,"color":"4","type":"text","text":"На autoassignment есть специальные справочники, в которых стороной бизнеса (или командой Жени Рудаковой для тестовых стендов) занесены связи между бизнес операцией, точкой продажи кредита и ЦП на который нужно заявку назначить.\n\nДаже для случая с тестовыми стендами необходимо согласовать с бизнесом связи на автоназначение.\n\nP.s на каждом ЦП есть свой технический пользователь, заявку необходимо назначать на него, а пользователи потом сами разбирают заявки для работы.\n\nПостановки на тему справочников и их использования:\n- 615313 - Архив постановок\n- 622443 - Авто назначение\n\n"},
		{"id":"93c4c56ed4a9b507","x":11520,"y":9153,"width":2123,"height":96,"type":"file","file":"Files/Pasted image 20241223141811.png"},
		{"id":"f1d143597c695cf2","x":10951,"y":9440,"width":709,"height":445,"type":"file","file":"Files/Pasted image 20241223154502.png"},
		{"id":"d794c9a6dd1c6b96","x":11760,"y":9440,"width":640,"height":239,"type":"text","text":"Справочники настраивают пользователи с ролью \"бизнес администратор\"\n"},
		{"id":"9a8c6646e798358e","x":10951,"y":9095,"width":509,"height":263,"type":"text","text":"- [ ] Завести запись о типе бизнес операции\n- [ ] Завести записи на автоназначении \n- [ ] Где лежат справочники salePoint?\n- [ ] Что выбирать в случае \"исключительной ситуации назначения\"\nЖеня Рудакова или  Денис Багдасаров - контакты\nметод department/target живет на autoassignment\nметод employee живет очевидно где"},
		{"id":"08b6d1d78ba1e662","x":11520,"y":9080,"width":639,"height":60,"color":"1","type":"text","text":"BO_14 это не наша БО как выяснилось, нам нужно завести свою!\nВероятно в справочнике на стороне **app**."},
		{"id":"e26d97e117407c1b","type":"text","text":"\n\n<font size = '56'>Поручение</font>","x":1920,"y":7040,"width":420,"height":180,"color":"4"},
		{"id":"31be637fc678586a","type":"text","text":"\n\n<font size = '56'>Автоматические проверки</font>","x":1920,"y":12960,"width":440,"height":220,"color":"4"},
		{"id":"8c3831aa97ca52c9","x":2624,"y":12649,"width":696,"height":951,"type":"text","text":"- [ ] Исправить алгоритм работы метода\n- [x] Поправить таблицы входных/выходных параметров\n- [x] Перепроверить названия и описания проверок согласно разделу ЛМД\n- [ ] Проработать интеграции для выполнения автопроверок"},
		{"id":"71f2a00571026b2a","type":"text","text":"<font size = '42'>GET/client/{mdmid} - ОТВЕТ</font>\n```json\n{\n  \"partyUId\": \"string\", // Глобальный идентификатор записи Customer HUB\n  \"firstName\": \"string\", // Имя\n  \"lastName\": \"string\", // Фамилия\n  \"middleName\": \"string\", //Отчество\n  \"fullNameDative\": \"string\", // ФИО полностью в дательном падеже\n  \"fullNameGenitive\": \"string\", // ФИО полностью в родительном падеже\n  \"birthDateTime\": \"string\", //Дата рождения\n  \"birthPlace\": \"string\",    // Место рождения\n  \"tin\": \"string\",           // ИНН\n  \"deathDateTime\": \"string\", // дата смерти\n  \"genderCode\": \"string\", // Код пола\n  \"nationalityCountryCode\": \"string\", // Код гражданства\n  \"maritalStatusCode\": 0, // Код семейного положения\n  \"education\": [\n    {\n      \"educationDegree\": \"string\"    // Код уровня образования\n    }\n  ],\n  \"address\": [\n    {\n      \"typeCode\": \"string\",          // Код типа адреса\n      \"notFormAddrName\": \"string\",   // Ненормализованный адрес\n      \"fullAddress\": \"string\"        // Полный неочищенный адрес (Адрес \"как есть\" не прошедший процесс очистки средствами Фактор)\n    }\n  ],\n  \"contactPhoneCommunication\": [\n    {\n      \"completeNumber\": \"string\",   // Полный номер телефона\n      \"phoneType\": \"string\"         // Код типа телефона\n    }\n  ],\n  \"blackList\": [                    // Информация о сегменте \"Черные списки\"\n    {\n      \"startDate\": \"string\",        // Дата начала действия\n      \"endDate\": \"string\",          // Дата окончания действия\n      \"blackListValue\": true,       // Значение черного списка\n      \"blackListName\": \"string\"     // Тип черного списка\n    }\n  ],\n  \"personDocumentIdentity\": [\n    {\n      \"endDate\": \"string\",               //Дата завершения действия\n      \"endOfRightToStay\": \"string\",      // Дата окончения срока действия пребывания (проживания) в РФ\n      \"expirationDate\": \"string\",        // Дата окончания действия\n      \"issueCode\": \"string\",             // Код подразделения\n      \"issueCountryCode\": \"string\",      // Страна выдачи\n      \"issueDate\": \"string\",             // Дата выдачи\n      \"issueName\": \"string\",             // Кем выдан\n      \"loginExternalSystem\": \"string\",   // Наименование учётной записи пользователя, производившей изменения в системе источике\n      \"nameExternalSystem\": \"string\",    // Код наиманования системы источника в которой производиись изменения\n      \"number\": \"string\",                // Номер\n      \"series\": \"string\",                // Серия\n      \"startDate\": \"string\",             // Дата начала действия\n      \"startOfRightToStay\": \"string\",    // Дата начала срока действия пребывания (проживания) в РФ\n      \"trustFlag\": \"string\",             // Признак - доверительная система\n      \"typeCode\": \"string\",              // Код типа документа\n      \"updateDate\": \"string\"             // Дата изменения в системе источнике\n    }\n  ],\n  \"segment\": [                           // Инфо о сегменте клиента (масс, премиум и т.д.)\n    {\n      \"type\": \"string\",                  // Тип сегмента\n      \"value\": \"string\",                 // Значение сегмента\n      \"status\": 0                        // Код статуса сегмента\n    }\n  ]\n}","x":4293,"y":-4000,"width":1100,"height":992},
		{"id":"4d4b4a5e7a144c9f","type":"text","text":"<font size = '42'>GET /prodProcCredit/details - ОТВЕТ</font>\n\n```json\n{\n  \"status\": {                                     // Статус выполнения операции\n    \"bcode\": \"string\",                            // Бизнес-код ошибки\n    \"message\": \"string\",                          // Текст ошибки\n    \"tid\": \"string\",\n    \"cid\": \"string\",\n    \"eid\": \"string\",                              // Идентификатор ошибки\n    \"generator\": \"string\"                         // Код системы сгенерировавшей ошибку\n  },\n  \"data\": {\n    \"retailLoanProductInstance\": {                // Экземпляр продукта Кредит клиента\n      \"number\": \"string\",                         // Номер экземпляра продукта\n      \"amount\": {                                 // Размер кредита\n        \"amount\": 0,                              \n        \"value\": 0,                               // Сумма\n        \"currency\": \"string\"                      // Валюта\n      },\n      \"type\": \"string\",                           // Тип продукта (CashLoan(кредит наличными), Auto(автокредит), Mortgage(ипотека), MilitaryMortgage)\n      \"businessProduct\": {                        // \n        \"dictionaryId\": \"string\",                 // Идентификатор справочника\n        \"dictionarySystem\": \"string\",             // Система справочника\n        \"key\": \"string\",                          // Бизнес-ключ записи в справочнике\n        \"keyName\": \"string\"                       // Название ключа (константа value)\n      },\n      \"status\": \"string\",                         // Draft(Драфт), Pending(ожидание), Active(активный), Closed(Закрыт)\n      \"reasonStatus\": {                           // Основание изменения статуса\n        \"code\": \"string\",                         // Код\n        \"info\": \"string\"                          // Информация\n      },\n      \"lifeSpan\": {                                      // Срок действия продукта\n        \"effectiveTime\": \"2024-11-28T09:56:21.452Z\",     // Дата начала\n        \"expirationTime\": \"2024-11-28T09:56:21.452Z\",    // Дата окончания\n        \"revocationTime\": \"2024-11-28T09:56:21.452Z\"     // Дата отзыва\n      },\n      \"revocationInfo\": {},                              // Причина отзыва\n      \"supportBranch\": {                                 // Филиал сопровождения\n        \"dictionaryId\": \"string\",                        // Идентификатор справочника\n        \"dictionarySystem\": \"string\",                    // Система справочника\n        \"key\": \"string\",                                 // Бизнес-ключ записи в справочнике\n        \"keyName\": \"string\"                              // Название ключа\n      },\n      \"issueTime\": \"string\",                             // Дата выдачи кредита\n      \"relatedProducts\": [                               // Связанные продукты\n        {\n          \"type\": \"string\",                              // Тип Parent(Родительский), Tranche(Транш), Linked(Связанный), Restructured(Реструктуризированный)\n          \"productInstance\": {                           // Экземпляр продукта\n            \"id\": \"string\",                              // Идентификатор\n            \"system\": \"string\"                           // Система\n          }\n        }\n      ],\n      \"arrangements\":                                      // Параметры обслуживания\n        \"retailLoanProductInstanceRateArrangement\": [      // Соглажение о начислении процентов (список действующих(неотозванных) соглашений данного типа )\n          {\n            \"productSubAccountType\": {                     //Тип продуктового субрегистра\n              \"dictionaryId\": \"string\",                    // Идентификатор справочника \n              \"dictionarySystem\": \"string\",                // Система справичника\n              \"key\": \"string\",                             // Бизнес-ключ записи в справочнике\n              \"keyName\": \"string\"                          // Название ключа\n            },\n            \"rateType\": \"string\",                          // Тип ставки (Current(текущая), Preferential(льготная), Zpr(ЗПР), Dsk(ДСК), Pps(ППС), VNS(Ваша низкая ставка), Subsidy(субсидированная))\n            \"periodType\": \"string\",                        // Периодичность ставки\n            \"currentValue\": \"string\",                      // Ставка\n            \"date\": \"2024-11-28\",                          // Дата начала действия ставки\n            \"activeRate\": true,                            // Признак действия ставки\n            \"reason\": {                                    // Причина изменения\n              \"dictionaryId\": \"string\",                    // Идентификатор справочника\n              \"dictionarySystem\": \"string\",                // Система справочника\n              \"key\": \"string\",                             // Бизнес-ключ записи в справочнике\n              \"keyName\": \"string\"                          // Название ключа\n            }\n          }\n        ],\n        \"retailLoanProductInstanceHolidayArrangement\": [   // Согдашение о предоставлении каникул\n          {\n            \"gracePeriod\": {                               // Льготный период\n              \"from\": \"2024-11-28\",                        // Дата начала\n              \"due\": \"2024-11-28\"                          // Дата окончания\n            },\n            \"holidayType\": {                               // Тип \n              \"key\": \"string\"                              // Бизнес-ключ записи в справочнике\n            }\n          }\n        ]\n      }\n    }\n  }\n}\n```\n","x":6010,"y":-3008,"width":1600,"height":1520},
		{"id":"8a7cfa79e5b9d06d","type":"text","text":"<font size = '42'>GET /prodProcCredit/details - ЗАПРОС</font>\n\n```json\n{\n  \"metadata\": {},\n  \"data\": {\n    \"retailLoanProductInstance\": {\n      \"id\": \"3fa85f64-5717-4562-b3fc-2c963f66afa6\",\n      \"system\": \"string\",\n      \"participants\": {\n        \"type\": \"string\",\n        \"party\": {\n          \"id\": \"string\",\n          \"system\": \"string\"\n        }\n      }\n    }\n  }\n}\n```\n","x":4400,"y":-2248,"width":1000,"height":596},
		{"id":"c302b57396d85cfd","type":"text","text":"<font size = '42'>GET /productProfile/details - ОТВЕТ</font>\n\n```json\n{\n  \"data\": {},                         //Базовые атрибуты детальной информации по продукту\n  \"errorString\": \"string\",            // Описание ошибки\n  \"result\": \"string\",                 // Результат запроса\n  \"loadingInfo\": {                    // Информация о загрузке продуктов из бек-систем\n    \"subSystems\": \"string\",\n    \"subSystemUserId\": \"string\"\n  },\n  \"mdmId\": \"string\"                   // id клиента\n}\n```\n","x":4150,"y":-1080,"width":1000,"height":416},
		{"id":"e8a696b819125d1d","type":"text","text":"<font size = '42'>data</font>\n\nДля каждого из продуктов возвращается не DetailBaseEntity, а наследник в зависимости от типа запрашиваемого продукта\nCardDetail\nLoanDetail - кредит\nAccountDetail\nDepositDetail\nInsuranceContractDetail\nExcrow\nAkkreditiv\nAccountDetailExtCards\nInvestAgreementDetail","x":4295,"y":-370,"width":711,"height":499},
		{"id":"2351cb701e9e1a70","type":"text","text":"<font size = '42'>loanDetail</font>\n\n| Имя                        | Описание                                                                                              |\n| -------------------------- | ----------------------------------------------------------------------------------------------------- |\n| alias                      | Пользовательское название продукта                                                                    |\n| balance                    | Доступный остаток                                                                                     |\n| closeDate                  | Дата закрытия                                                                                         |\n| entityId                   | Номер счета погашения (запрещено к использованию)                                                     |\n| entityLastTrans            | Дата последней транзакции (не использовать)                                                           |\n| entityLocalId              | Идентификатор в локальной системе                                                                     |\n| entityName                 | Имя продукта                                                                                          |\n| entitySubSystems           | Система которой принадлежит продукт                                                                   |\n| entityType                 | Тип продукта                                                                                          |\n| expireDate                 | Планируемая дата закрытия                                                                             |\n| extended                   | Не использовать                                                                                       |\n| externalIdPart1            | не использовать                                                                                       |\n| externalIdPart2            | не использовать                                                                                       |\n| favorite                   | избранное                                                                                             |\n| icon                       | иконка                                                                                                |\n| mayCredit                  | кредитование счета                                                                                    |\n| mayDebit                   | дебетирование счета                                                                                   |\n| openDate                   | дата открытия                                                                                         |\n| organisationUnit           | код филиала банка                                                                                     |\n| branch                     | код филиала банка                                                                                     |\n| publicId                   | публичный идентификатор продукта                                                                      |\n| state                      | статус загрузки из учетной системы                                                                    |\n| version                    | не использовать                                                                                       |\n| status                     | статус кредита                                                                                        |\n| timestamp                  | дата последней загрузки продукта из учетной системы                                                   |\n| userId                     | идентификатор пользователя                                                                            |\n| valid                      | не использовать                                                                                       |\n| visible                    | флаг видимый продукт                                                                                  |\n| account                    | номер счета погашения кредита                                                                         |\n| accuredInterest            | начисленные проценты                                                                                  |\n| advancedRepaymentAmount    | общая сумма задолженности включая просрочки и штрафы                                                  |\n| cardNumber                 | номер карты                                                                                           |\n| contrPeriod                | срок договора в месяцах                                                                               |\n| contrSum                   | начальная сумма кредита                                                                               |\n| contractType               | тип контракта (например MORTGAGE)                                                                     |\n| currentAmount              | Текущая задолженность                                                                                 |\n| currentInterest            | текущая задолженность. Проценты                                                                       |\n| unusedLimit                | неиспользованный лимит                                                                                |\n| duePrincipal               | основной долг                                                                                         |\n| endPaymentDate             | дата окончания платёжного периода                                                                     |\n| hasOverdue                 | признак просрочки платежа                                                                             |\n| isClosed                   | флаг закрыто ли                                                                                       |\n| lastPaymentAmount          | сумма последнего платежа                                                                              |\n| lastPaymentDate            | дата последнего платежа                                                                               |\n| loanRest                   | текущий остаток                                                                                       |\n| mortgage                   | признак ипотечного кредита                                                                            |\n| nis                        | признак принадлежности договора к Накопительно-ипотечной системе жилищного обеспечения военнослужащих |\n| number                     | номер договора по кредиту                                                                             |\n| pastDue                    | основная сумма просроченной задолжности                                                               |\n| pastDueAmount              | общая сумма просроченной задолженности                                                                |\n| pastDueInterest            | проценты по просроченной задолженности                                                                |\n| pastDueInterestPentality   | штраф за просроченную выплату процентов                                                               |\n| pastDuePentality           | штраф за просроченную выплату                                                                         |\n| pastDueComission           | комиссия                                                                                              |\n| pastDueComissionPentality  | штраф за просроченную выплату комиссии                                                                |\n| paymentAccuredInterest     | начисленные проценты                                                                                  |\n| paymentCurrentInterest     | проценты за текущий период                                                                            |\n| planningPaymentAmount      | сумма планового платежа                                                                               |\n| planningPaymentDate        | дата планового платежа                                                                                |\n| trunsh                     | тип траншей                                                                                           |\n| rate                       | ставка по кредиту %                                                                                   |\n| unusedLimit                | сумма неиспользованного кредитного лимита (не работает, инфы нет)                                     |\n| daysDelay                  | количество дней просрочки                                                                             |\n| pastDueDate                | дата возникновения просрочки                                                                          |\n| insurance                  | признак наличия страховки                                                                             |\n| dateDelays                 | дата возникновения просрочки?                                                                         |\n| companyName                | название компании работодателя                                                                        |\n| loanAccount                | номер ссудного счета по кредиту                                                                       |\n| incompleteRegistrationInfo | коллекция. Информация по зарегистрированным частичным досрочным погашениям                            |\n| totalRegistrationInfo      | коллекция. Информация по зарегистрированным полным досрочным погашениям                               |\n| region                     | регион                                                                                                |\n| salePoint                  | код точки продажи                                                                                     |\n| originalLoanInfo           | данные исходного клиентского кредита                                                                  |\n| paymentHoliday             | кредитные каникулы                                                                                    |\n| finalPaymentDate           | дата последнего платежа по графику                                                                    |\n| debtList                   | детализация информации о задолженностях                                                               |\n| collateralList             | список залогов по договору                                                                            |\n| bankingProductCode         | код бизнес-продукта                                                                                   |\n| yourRate                   | данные услуги \"ваша ставка\"                                                                           |\n| borrowerInfo               | данные заёмщика                                                                                       |\n| pastStateDuty              | госпошлина                                                                                            |\n| isSoldOut                  | признак полной продажи договора                                                                       |\n| repaymentDelayDate         | дата исполнения заявления на погашение просроченной задолженности                                     |\n","x":5221,"y":94,"width":711,"height":1440},
		{"id":"9febc1a7b017c082","type":"text","text":"<font size = '42'>GET /productProfile/details - ОТВЕТ (из сваггера)</font>\n\n\n```json\n{\n  \"data\": {\n    \"@type\": \"LoanDetail\",\n    \"type\": null,\n    \"alias\": null,\n    \"balance\": null,\n    \"branch\": \"00000\",\n    \"closeDate\": null,\n    \"entityName\": null,\n    \"entitySubSystems\": null,\n    \"entityType\": null,\n    \"expireDate\": \"2024-12-27\",\n    \"externalIdPart1\": null,\n    \"externalIdPart2\": null,\n    \"favourite\": null,\n    \"isActive\": null,\n    \"isBlocked\": null,\n    \"mayDebit\": null,\n    \"mayCredit\": null,\n    \"name\": null,\n    \"openDate\": \"2022-09-20\",\n    \"productId\": null,\n    \"publicId\": null,\n    \"state\": null,\n    \"status\": \"cm.LoanContractStatus.Active\",\n    \"statusDisplayName\": null,\n    \"systemInstance\": null,\n    \"timestamp\": null,\n    \"userId\": null,\n    \"version\": null,\n    \"visible\": null,\n    \"vtbPay\": null,\n    \"account\": null,\n    \"accruedInterest\": null,\n    \"additionalInfo\": {\n      \"productList\": [\n        {\n          \"id\": \"3820a9fe-3137-4207-86c6-b4b34819f5f2\"\n        }\n      ]\n    },\n    \"debtList\": [\n      {\n        \"debtType\": 0,\n        \"amount\": 100,\n        \"debtDate\": \"2024-11-20\"\n      }\n    ],\n    \"advancedRepaymentAmount\": {\n      \"amount\": 8399.48,\n      \"currency\": \"RUB\"\n    },\n    \"bankingProductCode\": null,\n    \"borrowerInfo\": null,\n    \"collateralList\": [\n      {\n        \"collateralAddress\": \"новосибирск, Обская 80\",\n        \"collateralCode\": \"3.6.9.1\",\n        \"collateralEndDate\": \"2022-06-02\",\n        \"collateralRegistrationDate\": \"2022-06-02\",\n        \"collateralStartDate\": \"2022-06-02\"\n      }\n    ],\n    \"companyName\": null,\n    \"contrPeriodUnit\": {\n      \"unit\": \"MONTH\",\n      \"count\": 12\n    },\n    \"contrSum\": {\n      \"amount\": 15000000,\n      \"currency\": \"RUB\"\n    },\n    \"contractNumber\": null,\n    \"contractType\": \"MORTGAGE\",\n    \"curentInterest\": null,\n    \"currentAmount\": {\n      \"amount\": 1118040.42,\n      \"currency\": \"RUB\"\n    },\n    \"daysDelay\": null,\n    \"duePrincipal\": null,\n    \"endPaymentDate\": \"2025-07-15\",\n    \"finalPaymentDate\": \"2032-07-12\",\n    \"giveDate\": null,\n    \"hasOverdue\": false,\n    \"inMigrationProcess\": null,\n    \"insurance\": null,\n    \"isClosed\": null,\n    \"isMigrated\": null,\n    \"isSoldOut\": null,\n    \"kind\": \"kind!!!!!!!!!!!!\",\n    \"lastPaymentAmount\": null,\n    \"lastPaymentDate\": null,\n    \"loanAccount\": null,\n    \"loanRest\": null,\n    \"mortgage\": null,\n    \"nis\": null,\n    \"number\": \"12345\",\n    \"participants\": [\n      {\n        \"localSystemClientId\": \"54321\",\n        \"mdmId\": \"54321\",\n        \"type\": \"type!!!!!!!!!!!!!!!!!\"\n      },\n      {\n        \"localSystemClientId\": \"localSystemClientId!!!!!!!!!!!!!!!!!\",\n        \"mdmId\": \"777\",\n        \"type\": \"type!!!!!!!!!!!!!!!!!\"\n      }\n    ],\n    \"pastDue\": null,\n    \"pastDueAmount\": null,\n    \"pastDueDate\": \"2022-07-12\",\n    \"pastDueInterest\": null,\n    \"pastDueInterestPentality\": null,\n    \"pastDuePentality\": null,\n    \"pastStateDuty\": null,\n    \"pastdueCommision\": null,\n    \"pastdueCommisionPentality\": null,\n    \"paymentAccuredtInterest\": null,\n    \"paymentCurrentInterest\": null,\n    \"payoutDate\": null,\n    \"planningPaymentAmount\": null,\n    \"planningPaymentDate\": \"2024-07-12\",\n    \"productType\": null,\n    \"rate\": null,\n    \"rateType\": null,\n    \"region\": null,\n    \"repaymentDelayDate\": \"2032-07-12\",\n    \"salePoint\": \"00000\",\n    \"subProductType\": \"БФКО_И7\",\n    \"timeZoneDiff\": \"0\",\n    \"unusedLimit\": null,\n    \"participantRole\": \"DEBTOR\"\n  },\n  \"errorString\": \"ERROR!!!!!!!!!\",\n  \"result\": \"result!!!!!!!!!!!!!!!!!!!!!\",\n  \"loadingInfo\": null,\n  \"mdmId\": \"12345\"\n}\n```","x":6030,"y":-1280,"width":1600,"height":2814}
	],
	"edges":[
		{"id":"e716185934f4a8ec","fromNode":"485f9b7c321fa5c1","fromSide":"bottom","toNode":"38b4a6a3485a3b68","toSide":"top"},
		{"id":"6f98228db2aa5b72","fromNode":"485f9b7c321fa5c1","fromSide":"bottom","toNode":"2d0913a44a604fd1","toSide":"top"},
		{"id":"bdebe81ef2a80239","fromNode":"38b4a6a3485a3b68","fromSide":"bottom","toNode":"3580bbfdc564ef6a","toSide":"top"},
		{"id":"194b17630ddea6b1","fromNode":"61a0ff6a76de25fc","fromSide":"left","toNode":"3580bbfdc564ef6a","toSide":"right"},
		{"id":"c714360ba90a5758","fromNode":"485f9b7c321fa5c1","fromSide":"left","toNode":"8d965cf3979e0c2f","toSide":"top"},
		{"id":"8801d70709ddc975","fromNode":"8d965cf3979e0c2f","fromSide":"bottom","toNode":"714e0450386e95fc","toSide":"top"},
		{"id":"b1cfeeadab4002b8","fromNode":"8d965cf3979e0c2f","fromSide":"left","toNode":"0451bfbffa29847a","toSide":"right"},
		{"id":"c2e9ebf30a64c68c","fromNode":"0451bfbffa29847a","fromSide":"top","toNode":"d864c48338da1b49","toSide":"bottom"},
		{"id":"a3046963c5e70080","fromNode":"485f9b7c321fa5c1","fromSide":"top","toNode":"fbd3b2c11c34bbf0","toSide":"bottom"},
		{"id":"a8050249d20bb8a0","fromNode":"9aacc319f0cd2d6b","fromSide":"bottom","toNode":"485f9b7c321fa5c1","toSide":"right"},
		{"id":"6e37a1bd511b330e","fromNode":"485f9b7c321fa5c1","fromSide":"bottom","toNode":"abe78e591acefc52","toSide":"bottom"},
		{"id":"10da91bb92a2cc4d","fromNode":"679764d437565081","fromSide":"right","toNode":"71f2a00571026b2a","toSide":"left"},
		{"id":"4343444e0643b44c","fromNode":"679764d437565081","fromSide":"right","toNode":"8a7cfa79e5b9d06d","toSide":"left"},
		{"id":"9bae4175baf3d170","fromNode":"8a7cfa79e5b9d06d","fromSide":"right","toNode":"4d4b4a5e7a144c9f","toSide":"left"},
		{"id":"0d64cac94519987c","fromNode":"679764d437565081","fromSide":"right","toNode":"c302b57396d85cfd","toSide":"left"},
		{"id":"2a9ed0cf81139412","fromNode":"c302b57396d85cfd","fromSide":"bottom","toNode":"e8a696b819125d1d","toSide":"top"},
		{"id":"deff1ca19a82d14d","fromNode":"e8a696b819125d1d","fromSide":"right","toNode":"2351cb701e9e1a70","toSide":"top"},
		{"id":"5f8aba66ce0c4005","fromNode":"e2daca8b296501d0","fromSide":"right","toNode":"b6671a08c558fc80","toSide":"left"},
		{"id":"bab47a7d8883762c","fromNode":"b6671a08c558fc80","fromSide":"bottom","toNode":"9456ed25e07b8963","toSide":"top"},
		{"id":"6580c4fb1201d930","fromNode":"7147a5ceaab055a5","fromSide":"right","toNode":"705fba97e83a4edb","toSide":"left"},
		{"id":"a9e24d1fa84c3ca5","fromNode":"7147a5ceaab055a5","fromSide":"right","toNode":"1b4acfd4dc5a32fa","toSide":"left"},
		{"id":"76a7371762146b66","fromNode":"7147a5ceaab055a5","fromSide":"right","toNode":"ea956ed38117175c","toSide":"left"},
		{"id":"c551b16516f72794","fromNode":"7147a5ceaab055a5","fromSide":"right","toNode":"3c9c65d0d857f2f4","toSide":"left"},
		{"id":"a49fe45203ae59e0","fromNode":"705fba97e83a4edb","fromSide":"right","toNode":"d8d7c4b368bccc07","toSide":"left"},
		{"id":"5bde4a8ac4e91374","fromNode":"705fba97e83a4edb","fromSide":"right","toNode":"a7af43692a827ff3","toSide":"left"},
		{"id":"d72516733e015dc9","fromNode":"a7af43692a827ff3","fromSide":"right","toNode":"26508692226d1aaf","toSide":"left"},
		{"id":"27f6a5ca76e89a66","fromNode":"26508692226d1aaf","fromSide":"right","toNode":"311ddbf6736e6f32","toSide":"left"},
		{"id":"c025180a8a0258d5","fromNode":"1b4acfd4dc5a32fa","fromSide":"right","toNode":"d4eb7a2002e35828","toSide":"left"},
		{"id":"350dac87569cbc82","fromNode":"1b4acfd4dc5a32fa","fromSide":"right","toNode":"daf25cd6cdf2c469","toSide":"left"},
		{"id":"57d8d015d0af9446","fromNode":"d8d7c4b368bccc07","fromSide":"right","toNode":"a33fda7a478489c8","toSide":"left"},
		{"id":"c536e438a328efe6","fromNode":"a33fda7a478489c8","fromSide":"right","toNode":"5f5d39e9fa20e1bc","toSide":"left"},
		{"id":"5aa49b4dcaaef612","fromNode":"311ddbf6736e6f32","fromSide":"right","toNode":"49f85e80ac7cad14","toSide":"left"},
		{"id":"588c6a49dadf8535","fromNode":"5f5d39e9fa20e1bc","fromSide":"right","toNode":"49f85e80ac7cad14","toSide":"left"},
		{"id":"bac17ba09ff08924","fromNode":"ea956ed38117175c","fromSide":"right","toNode":"79d867a0815b5bb8","toSide":"left"},
		{"id":"cdd3ed9817949f76","fromNode":"3c9c65d0d857f2f4","fromSide":"right","toNode":"75c891811adf35ff","toSide":"left"},
		{"id":"1ba96e7737f537b8","fromNode":"fa088b8c087fd448","fromSide":"bottom","toNode":"cb8a4eb2b0f1ba4d","toSide":"top"},
		{"id":"80f5783b73efa75a","fromNode":"75c891811adf35ff","fromSide":"right","toNode":"d1cdfec392131981","toSide":"left"},
		{"id":"0d01255bcb444878","fromNode":"75c891811adf35ff","fromSide":"right","toNode":"e38bfcdda7292376","toSide":"left"},
		{"id":"943e0e4c63255d4d","fromNode":"75c891811adf35ff","fromSide":"right","toNode":"3d152336fe83a5cf","toSide":"left"},
		{"id":"f6670c4ed591cd32","fromNode":"3df1b1223087609a","fromSide":"right","toNode":"065d09ce375c5e1a","toSide":"left"},
		{"id":"8f678b5472bcf300","fromNode":"065d09ce375c5e1a","fromSide":"right","toNode":"b883a4748fc81596","toSide":"left"},
		{"id":"4138c75a817fffd5","fromNode":"e38bfcdda7292376","fromSide":"right","toNode":"5a40b7480f4dab96","toSide":"left"},
		{"id":"865ee0587148ca57","fromNode":"d1cdfec392131981","fromSide":"right","toNode":"5a40b7480f4dab96","toSide":"top"},
		{"id":"a4ef86bdda041dbe","fromNode":"3d152336fe83a5cf","fromSide":"right","toNode":"5a40b7480f4dab96","toSide":"bottom"},
		{"id":"814de7a1308d415f","fromNode":"5a40b7480f4dab96","fromSide":"right","toNode":"9a8c6646e798358e","toSide":"left"},
		{"id":"4a62090f861f9333","fromNode":"9a8c6646e798358e","fromSide":"right","toNode":"93c4c56ed4a9b507","toSide":"left"},
		{"id":"87811e4e773be268","fromNode":"d794c9a6dd1c6b96","fromSide":"left","toNode":"f1d143597c695cf2","toSide":"right"},
		{"id":"d04a071961700a11","fromNode":"9a8c6646e798358e","fromSide":"bottom","toNode":"f1d143597c695cf2","toSide":"top"},
		{"id":"35a1d0ebd0650c7f","fromNode":"e26d97e117407c1b","fromSide":"right","toNode":"7147a5ceaab055a5","toSide":"left"},
		{"id":"6fba7acef1c302ae","fromNode":"e26d97e117407c1b","fromSide":"right","toNode":"3df1b1223087609a","toSide":"left"},
		{"id":"458d170fe29aeeef","fromNode":"31be637fc678586a","fromSide":"right","toNode":"8c3831aa97ca52c9","toSide":"left"},
		{"id":"ebd4b71df9f318bb","fromNode":"c302b57396d85cfd","fromSide":"right","toNode":"9febc1a7b017c082","toSide":"left"}
	]
}